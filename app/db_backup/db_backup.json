{"projects":[{"_id":"659c23f7e364f81f501d1aa3","name":"Погода","baseUrl":"gismeteo"},{"_id":"65a0298f43f4516470d8c647","name":"Sample","baseUrl":"girls"},{"_id":"6526eb50eb906e64f9b2ad01","name":"Torrents","baseUrl":"torrents"}],"endpoints":[{"_id":"659bf18ff6bd4562ce8d0fec","projectId":"659bc3aeff77d3fd149a701c","url":"current","snippets":["659bf18ff6bd4562ce8d0feb"],"method":"get"},{"_id":"659c0997a6d95e204d88a936","projectId":"659bc3aeff77d3fd149a701c","url":"second","snippets":["659bf18ff6bd4562ce8d0feb","659c0997a6d95e204d88a935"],"method":"get"},{"_id":"659c0c6d97dee561efb3966e","projectId":"659bc3aeff77d3fd149a701c","url":"sample","snippets":["659c0c6d97dee561efb3966d"],"method":"get"},{"_id":"659c0cf43f415d84f263de0a","projectId":"659bc3aeff77d3fd149a701c","url":"sample","snippets":["659c0cf43f415d84f263de09"],"method":"get"},{"_id":"659c0eb657a90b6eff03f189","projectId":"659bc3aeff77d3fd149a701c","url":"sample","snippets":["659c0eb657a90b6eff03f188"],"method":"get"},{"_id":"659c0ed11294e9db8b9177e2","projectId":"659bc3aeff77d3fd149a701c","url":"sample","snippets":["659c0ed11294e9db8b9177e1"],"method":"get"},{"_id":"659c0eed2b11e7b3b3fa74d4","projectId":"659bc3aeff77d3fd149a701c","url":"sample","snippets":["659c0eed2b11e7b3b3fa74d3"],"method":"get"},{"_id":"659c10a1170807934ad17629","projectId":"659bc3aeff77d3fd149a701c","url":"sample","snippets":["659c10a1170807934ad17628"],"method":"get"},{"_id":"659c2402e364f81f501d1aa5","projectId":"659c23f7e364f81f501d1aa3","url":"current","snippets":["659c2402e364f81f501d1aa4"],"method":"get"},{"_id":"65a029a643f4516470d8c649","projectId":"65a0298f43f4516470d8c647","url":"now","snippets":["65a029a643f4516470d8c648"],"method":"get"},{"_id":"65296c48c185f981111a2b84","projectId":"6526eb50eb906e64f9b2ad01","url":"topics","snippets":["65290b804272c9b1b912ff04"],"method":"get"},{"_id":"652c524f952586a883d981c3","projectId":"6526eb50eb906e64f9b2ad01","url":"topics/:id","snippets":["652c51fa952586a883d981c2"],"method":"get"},{"_id":"65324c678885b76805b850b0","projectId":"65324b488885b76805b850ae","url":"list","snippets":["65324bf98885b76805b850af"],"method":"get"},{"_id":"6532bc059439ebe9462ff630","projectId":"6526eb50eb906e64f9b2ad01","url":"login","snippets":["6532bba99439ebe9462ff62f"],"method":"get"},{"_id":"653527652cf6efb3620514bd","projectId":"6526eb50eb906e64f9b2ad01","url":"search","snippets":["653526f12cf6efb3620514bc"],"method":"get"},{"_id":"65aa9df8b53b1a9bc951019c","projectId":"65324b488885b76805b850ae","url":"eample","snippets":["65aa9df8b53b1a9bc951019b"],"method":"get"},{"_id":"65afb344c3e162321dbe889f","projectId":"65afb32bc3e162321dbe889d","url":"sample","snippets":["65afb344c3e162321dbe889e"],"method":"get"},{"_id":"65ba21ab92f0bd181e42eef0","projectId":"65a0298f43f4516470d8c647","url":"all","snippets":["65ba21ab92f0bd181e42eeef"],"method":"get"}],"snippets":[{"_id":"659bea46821939ebcdb01892","code":"// TODO"},{"_id":"659beab4e3c982270bff26cf","code":"// TODO"},{"_id":"659bedc006bc403a93964cd4","code":"// TODO"},{"_id":"659bee05f6f3a62a3de4a815","code":"// TODO"},{"_id":"659bee9232f1a7a6b2311a92","code":"// TODO"},{"_id":"659befb6ddad94263ae955db","code":"// TODO"},{"_id":"659befd086a86e26aa9a6358","code":"// TODO"},{"_id":"659bf04fd94d512f222574ee","code":"// TODO"},{"_id":"659bf1149a5546fb3064c7f4","code":"// TODO"},{"_id":"659bf12bb075e5938d761621","code":"// TODO"},{"_id":"659bf1770678a109fcdc2059","code":"// TODO"},{"_id":"659bf18ff6bd4562ce8d0feb","code":"function process(input) {\n    return {\n        status: \"Ok\"\n    }\n}"},{"_id":"659c0997a6d95e204d88a935","code":"function process(input, second) {\n    console.log(`input: ${input}`);\n    // console.log(`second: ${second}`);\n    return \"ok\";\n}"},{"_id":"659c0c6d97dee561efb3966d","code":"// TODO"},{"_id":"659c0cf43f415d84f263de09","code":"// TODO"},{"_id":"659c0eb657a90b6eff03f188","code":"// TODO"},{"_id":"659c0ed11294e9db8b9177e1","code":"// TODO"},{"_id":"659c0eed2b11e7b3b3fa74d3","code":"// TODO new new new"},{"_id":"659c10a1170807934ad17628","code":"// TODO"},{"_id":"659c2402e364f81f501d1aa4","code":"async function process(input) {\n    let res = (await axios({\n          method: 'get',\n          url: `https://www.gismeteo.ru/weather-ryazan-4394/now/`,\n          // data: data,\n          maxRedirects: 0\n        })).data;\n        \n    const $ = cheerio.load(res);\n\n    const temp = $(\".now-weather .unit_temperature_c\").text().trim();\n    const humidity = $(\"div.humidity:nth-child(1) > div:nth-child(2)\").text().trim();\n    const pressure = $('.unit_pressure_mm_hg').text().trim();\n\n  return { \n      result: \"Ok\", \n      temperature: temp, \n      humidity: `${humidity}%`,\n      pressure: pressure\n  };\n}"},{"_id":"65a029a643f4516470d8c648","code":"function clearText(element) {\n    return element.contents().filter(function() {\n        return this.type === 'text';\n    }).text().trim();\n    \n}\n\nasync function phoneInfo(phoneSrc) {\n    try {\n        if (typeof phoneSrc !== 'string' && !(phoneSrc instanceof String)) {\n            return {\n                region: 'Unknown'\n            }\n        }\n        const phone = phoneSrc.replaceAll(' ', '+').trim();\n        const params = `__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUKLTkzNzc4MTQ5N2QYAQUvY3RsMDAkY3RsMDAkY3BoTWFpbiRjcGhTZXJ2aWNlTWFpbiRtdkFkU2VsZWN0b3IPD2QCAWSArUxVg%2F4mZQJEuv%2B9St0OhSFktg%3D%3D&__VIEWSTATEGENERATOR=DCAE8BF3&ctl00%24ctl00%24ShowAdRDFS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDFS%24hfTechInfo=&ctl00%24ctl00%24hfPagesVisits=5&ctl00%24ctl00%24ShowAd1Desktop%24hfCountry=RU&ctl00%24ctl00%24ShowAd1Desktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumDesktop=${phone}&ctl00%24ctl00%24cphMain%24cphServiceMain%24btnSearchDesktop=%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumMobile=&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfCountry=RU&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputName=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputEmail=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputMessage=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24hfItemName=MobilePhoneInfo.aspx&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfLoadItems=20&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfCacheUGC=22.10.2023+18%3A40%3A52&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24ratingValue=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview5stars=&ctl00%24ctl00%24ShowAd3%24hfCountry=RU&ctl00%24ctl00%24ShowAd3%24hfTechInfo=&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfCountry=RU&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfTechInfo=&ctl00%24ctl00%24ShowAdRDBS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDBS%24hfTechInfo=&ctl00%24ctl00%24hfCachedTime=22.10.2023+18%3A42%3A36`;\n        console.log(params);\n    \n        // Cookie\n        // \tASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697989242.1.1.1697989407.3.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009068600200; _gat=1\n        \n        const res = (await axios({\n              method: 'post',\n              url: 'https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx',\n              data: params,\n              headers: {\n                \"Accept\" : \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\",\n                \"Accept-Encoding\" : \"gzip, deflate, br\",\n                \"Accept-Language\": \"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3\",\n                \"Cache-Control\": \"no-cache\",\n                \"Connection\": \"keep-alive\",\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                \"Host\": \"www.spravportal.ru\",\n                \"Origin\": \"https://www.spravportal.ru\",\n                \"Pragma\": \"no-cache\",\n                \"Referer\": \"https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx\",\n                \"Sec-Fetch-Dest\": \"document\",\n                \"Sec-Fetch-Mode\": \"navigate\",\n                \"Sec-Fetch-Site\": \"same-origin\",\n                \"Sec-Fetch-User\": \"?1\",\n                \"Upgrade-Insecure-Requests\": \"1\",\n            \t\"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0\",\n                \"Cookie\": \"ASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697992067.2.1.1697992145.60.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009076473750; cf_chl_2=b91fee0da59bdaf; cf_clearance=qxsbf1HgDl.EkIXEdrzxvhCGeVEqTbe8qlpGlUyrRLU-1697992060-0-1-f03b3c7d.5fc09290.a73a639d-160.0.0; _gat=1\" // \"ASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697989242.1.1.1697989407.3.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009068600200; _gat=1\"\n              }\n            })).data;\n        \n        console.log(res.includes(\"область\"));\n        \n    \tconst $ = cheerio.load(res);\n        const region = $('.form-horizontal > div:nth-child(1) > div:nth-child(2) > strong:nth-child(1)');\n        console.log(region);\n        \n        return {\n            region: region.text()\n        };\n    } catch (err) {\n        return {\n            region: \"Error\"\n        }\n    }\n}\n\nasync function process(input) {\n\t// const res = (await axios.post('https://sex7.sexorzn.xyz/core/api.php?load')).data;\n\n// const params = `__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUKLTkzNzc4MTQ5N2QYAQUvY3RsMDAkY3RsMDAkY3BoTWFpbiRjcGhTZXJ2aWNlTWFpbiRtdkFkU2VsZWN0b3IPD2QCAWSArUxVg%2F4mZQJEuv%2B9St0OhSFktg%3D%3D&__VIEWSTATEGENERATOR=DCAE8BF3&ctl00%24ctl00%24ShowAdRDFS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDFS%24hfTechInfo=&ctl00%24ctl00%24hfPagesVisits=5&ctl00%24ctl00%24ShowAd1Desktop%24hfCountry=RU&ctl00%24ctl00%24ShowAd1Desktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain&ctl00%24ctl00%24cphMain%24cphServiceMain%24btnSearchDesktop=%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumMobile=&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfCountry=RU&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputName=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputEmail=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputMessage=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24hfItemName=MobilePhoneInfo.aspx&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfLoadItems=20&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfCacheUGC=22.10.2023+18%3A40%3A52&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24ratingValue=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview5stars=&ctl00%24ctl00%24ShowAd3%24hfCountry=RU&ctl00%24ctl00%24ShowAd3%24hfTechInfo=&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfCountry=RU&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfTechInfo=&ctl00%24ctl00%24ShowAdRDBS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDBS%24hfTechInfo=&ctl00%24ctl00%24hfCachedTime=22.10.2023+18%3A42%3A36`;\n\n// const spravPortal = (await axios({\n//         method: 'get',\n//         url: 'https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx',\n//         data: params\n//     }));\n    \n    // console.log(\"==============================\");\n    // console.log(spravPortal.headers);\n    // console.log(\"==============================\");\n    \n    const res = (await axios({\n          method: 'post',\n          url: 'https://sexyrzn.com/core/api.php?load',\n          data: {\n            num: `${input.query.count || 0}`,\n            path: '/now/'\n          },\n          headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n          }\n        })).data;\n\n    // console.log(res);\n\t\n\tconst $ = cheerio.load(res);\n\tlet items = $('.girl_info')\n\tconst arr = [];\n\n\tconsole.log(`len: ${items.length}`);\n\n    // const testRegion = await phoneInfo('8 920 950-09-78')\n    // console.log(await phoneInfo('8 920 950-09-78'));\n\n\tfor (var i = 0; i < items.length; i++) {\n\t\tlet slutName = items.find('.girl_name a').eq(i);\n\t\tlet slutPhone = items.find('.girl_phone').eq(i);\n        const slutInfo = items.find('.girl-intro p').eq(i);\n        const desc = items.find('.girl-desc').eq(i);\n        \n        const pageLink = slutName.attr('href');\n        const uslugi = items.find('.yamogu span:not(.strike)');\n        \n        console.log('len uslugi: ' + uslugi.length);\n        // for (var i = 0; i < uslugi.length; i++) {\n        //     const usluga = sluga.eq(i);\n        //     console.log(usluga.text());\n        // }\n        \n        \n\t\tarr.push({\n\t\t    page: `https://sexyrzn.com${pageLink}`,\n\t\t\tname: clearText(slutName),\n\t\t\tphone: clearText(slutPhone),\n\t\t\tinfo: clearText(slutInfo),\n\t\t\tdescription: desc.text().trim().split('\\n').map(str => str.trim()),\n// \t\t\tphoneRegion: await phoneInfo(clearText(slutPhone))\n\t\t});\n\t}\n\n\treturn { count: items.length, sluts: arr };\n}"},{"_id":"65a2b6bdb4467728cfe83193","code":"function process(input) {\n    return {\n        someRes: \"ok\"\n    }\n}"},{"_id":"65a2b74ab4467728cfe83195","code":"// TODO"},{"_id":"65aa7ca59ffdd27c8a8b7b50","code":"// TODO"},{"_id":"65290b804272c9b1b912ff04","code":"const querystring = require('querystring');\n\n/*\n    http://localhost:3000/site/rutracker/topics?text=matrix+4\n    Список трекеров: http://grinkod.spb.ru/top10_russian_torrent_trackers.html\n    https://games-torrents.org/4150-car-mechanic-simulator-2018.html\n    http://rutor.info\n*/\nvar DMap = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13, 14: 14, 15: 15, 16: 16, 17: 17, 18: 18, 19: 19, 20: 20, 21: 21, 22: 22, 23: 23, 24: 24, 25: 25, 26: 26, 27: 27, 28: 28, 29: 29, 30: 30, 31: 31, 32: 32, 33: 33, 34: 34, 35: 35, 36: 36, 37: 37, 38: 38, 39: 39, 40: 40, 41: 41, 42: 42, 43: 43, 44: 44, 45: 45, 46: 46, 47: 47, 48: 48, 49: 49, 50: 50, 51: 51, 52: 52, 53: 53, 54: 54, 55: 55, 56: 56, 57: 57, 58: 58, 59: 59, 60: 60, 61: 61, 62: 62, 63: 63, 64: 64, 65: 65, 66: 66, 67: 67, 68: 68, 69: 69, 70: 70, 71: 71, 72: 72, 73: 73, 74: 74, 75: 75, 76: 76, 77: 77, 78: 78, 79: 79, 80: 80, 81: 81, 82: 82, 83: 83, 84: 84, 85: 85, 86: 86, 87: 87, 88: 88, 89: 89, 90: 90, 91: 91, 92: 92, 93: 93, 94: 94, 95: 95, 96: 96, 97: 97, 98: 98, 99: 99, 100: 100, 101: 101, 102: 102, 103: 103, 104: 104, 105: 105, 106: 106, 107: 107, 108: 108, 109: 109, 110: 110, 111: 111, 112: 112, 113: 113, 114: 114, 115: 115, 116: 116, 117: 117, 118: 118, 119: 119, 120: 120, 121: 121, 122: 122, 123: 123, 124: 124, 125: 125, 126: 126, 127: 127, 1027: 129, 8225: 135, 1046: 198, 8222: 132, 1047: 199, 1168: 165, 1048: 200, 1113: 154, 1049: 201, 1045: 197, 1050: 202, 1028: 170, 160: 160, 1040: 192, 1051: 203, 164: 164, 166: 166, 167: 167, 169: 169, 171: 171, 172: 172, 173: 173, 174: 174, 1053: 205, 176: 176, 177: 177, 1114: 156, 181: 181, 182: 182, 183: 183, 8221: 148, 187: 187, 1029: 189, 1056: 208, 1057: 209, 1058: 210, 8364: 136, 1112: 188, 1115: 158, 1059: 211, 1060: 212, 1030: 178, 1061: 213, 1062: 214, 1063: 215, 1116: 157, 1064: 216, 1065: 217, 1031: 175, 1066: 218, 1067: 219, 1068: 220, 1069: 221, 1070: 222, 1032: 163, 8226: 149, 1071: 223, 1072: 224, 8482: 153, 1073: 225, 8240: 137, 1118: 162, 1074: 226, 1110: 179, 8230: 133, 1075: 227, 1033: 138, 1076: 228, 1077: 229, 8211: 150, 1078: 230, 1119: 159, 1079: 231, 1042: 194, 1080: 232, 1034: 140, 1025: 168, 1081: 233, 1082: 234, 8212: 151, 1083: 235, 1169: 180, 1084: 236, 1052: 204, 1085: 237, 1035: 142, 1086: 238, 1087: 239, 1088: 240, 1089: 241, 1090: 242, 1036: 141, 1041: 193, 1091: 243, 1092: 244, 8224: 134, 1093: 245, 8470: 185, 1094: 246, 1054: 206, 1095: 247, 1096: 248, 8249: 139, 1097: 249, 1098: 250, 1044: 196, 1099: 251, 1111: 191, 1055: 207, 1100: 252, 1038: 161, 8220: 147, 1101: 253, 8250: 155, 1102: 254, 8216: 145, 1103: 255, 1043: 195, 1105: 184, 1039: 143, 1026: 128, 1106: 144, 8218: 130, 1107: 131, 8217: 146, 1108: 186, 1109: 190}\n\nfunction unicodeToWin1251_UrlEncoded(s) {\n    var L = []\n    for (var i=0; i<s.length; i++) {\n        var ord = s.charCodeAt(i)\n        if (!(ord in DMap))\n            throw \"Character \"+s.charAt(i)+\" isn't supported by win1251!\";\n        L.push('%'+DMap[ord].toString(16));\n    }\n    return L.join('').toUpperCase();\n}\n\nfunction clearText(element) {\n    return element.contents().filter(function() {\n        return this.type === 'text';\n    }).text().trim();\n    \n}\n\nasync function process(input) {\n    const text = input.query.text;\n    const kinozalResults = await searchOnKinozal(text);\n    const nnmclubResults = await searchOnNnmclub(text);\n    const rutorResults = await searchOnRutor(text);\n\n    return { \n        result: rutorResults.concat(kinozalResults.concat(nnmclubResults))\n    };\n}\n\n\nasync function searchOnRutor(text) {\n    const site = 'rutor';\n    const baseUrl = 'http://rutor.is';\n    // http://rutor.is/search/0/0/000/2/matrix\n    const url = `${baseUrl}/search/0/0/000/2/${text}`;\n    \n    let res = (await axios({\n        method: 'get',\n        url: url,\n          headers: {\n            \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\",\n            \"Accept-Charset\": \"UTF-8\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\": \"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3\",\n            \"Content-type\": \"application/x-www-form-urlencoded\",\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0\",\n          },\n          maxRedirects: 0\n    }));\n    \n    const htmlBody = res.data;\n    \n\tconst $ = cheerio.load(htmlBody);\n \tconst topics = $('#index > table:nth-child(2) tr:not(.backgr)');\n\n    console.log(htmlBody);\n\n    let arr = [];\n\n\tfor (var i = 0; i < topics.length; i++) {\n\t\tlet title = topics.eq(i).find('td:nth-child(2) > a:nth-child(3)').text().trim();\n\t\tlet pageUrl = topics.eq(i).find('td:nth-child(2) > a:nth-child(3)').attr('href');\n\t\tlet author = \"\";\n\t\tlet size = clearText(topics.eq(i).find('td:nth-child(4)'));\n \t\tlet seed = clearText(topics.eq(i).find('td:nth-child(5) > span:nth-child(1)'));\n \t\tlet leech = clearText(topics.eq(i).find('td:nth-child(5) > span:nth-child(3)'));\n\n        // Тут еще есть количество комментов в 3 столбце\n\n\t\tarr.push({\n\t\t    site: site,\n\t\t\ttitle: title,\n\t\t\tauthor: author,\n\t\t\tsize: size,\n\t\t\tseed: seed,\n\t\t\tleech: leech,\n\t\t\tpageUrl: `${baseUrl}${pageUrl}`\n\t\t});\n\t}\n\n    return arr;\n}\n\nasync function searchOnKinozal(text) {\n    const site = \"kinozal\";\n    const baseUrl = 'https://kinozal.tv'\n    const url = `${baseUrl}/browse.php?s=${text}&g=0&c=0&v=0&d=0&w=0&t=1&f=0`\n    \n    let res = (await axios({\n          method: 'get',\n          url: `${url}`,\n          headers: {\n            \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\",\n            \"Accept-Charset\": \"UTF-8\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\": \"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3\",\n            \"Content-type\": \"application/x-www-form-urlencoded\",\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0\",\n          },\n          maxRedirects: 0,\n          responseType: 'arraybuffer',\n          responseEncoding: 'binary'\n        }));\n    \n    const htmlBody = iconv.decode(res.data.toString('binary'), 'cp1251');\n\tconst $ = cheerio.load(htmlBody);\n \tconst topics = $('.t_peer .bg');\n\n    // console.log(htmlBody);\n\n    let arr = [];\n\n\tfor (var i = 0; i < topics.length; i++) {\n\t\tlet title = topics.eq(i).find('td:nth-child(2) > a:nth-child(1)').text().trim();\n\t\tlet pageUrl = topics.eq(i).find('td:nth-child(2) > a:nth-child(1)').attr('href');\n\t\tlet author = topics.eq(i).find('td:nth-child(8)').text().trim();\n\t\tlet size = clearText(topics.eq(i).find('td:nth-child(4)'));\n\t\tlet seed = topics.eq(i).find('td:nth-child(5)').text().trim();\n\t\tlet leech = topics.eq(i).find('td:nth-child(6)').text().trim();\n\n        // Тут еще есть количество комментов в 3 столбце\n\n\t\tarr.push({\n\t\t    site: site,\n\t\t\ttitle: title,\n\t\t\tauthor: author,\n\t\t\tsize: size,\n\t\t\tseed: seed,\n\t\t\tleech: leech,\n\t\t\tpageUrl: `${baseUrl}${pageUrl}`\n\t\t});\n\t}\n\n    return arr;\n}\n\n\nasync function searchOnNnmclub(text) {\n    const site = \"nnmclub\";\n    const baseUrl = 'https://nnmclub.to';\n    const url = `${baseUrl}/forum/tracker.php`;\n    const sid = \"3f4ac13892c68f1cbae83c86c8ee8f7e\";\n\n    const data = {\n        prev_sd: \"0\",\n        prev_a:\t\"0\",\n        prev_my: \"0\",\n        prev_n:\t\"0\",\n        prev_shc: \"0\",\n        prev_shf: \"1\",\n        prev_sha: \"1\",\n        prev_shs: \"0\",\n        prev_shr: \"0\",\n        prev_sht: \"0\",\n        o: \"10\",\n        s: \"2\",\n        tm: \"-1\",\n        shf: \"1\",\n        sha: \"1\",\n        ta: \"-1\",\n        sns: \"-1\",\n        sds: \"-1\",\n        nm: text,\n        pn:\t\"\",\n        submit: \"%CF%EE%E8%F1%EA\"\n    };\n    data['f[]'] = \"-1\";\n\n    const dataString = Object.keys(data)\n      .map((key, index) => `${key}=${unicodeToWin1251_UrlEncoded(data[key])}`)\n      .join('&');\n    \n    console.log(dataString);\n    \n    // const dataString = \"prev_sd=0&prev_a=0&prev_my=0&prev_n=0&prev_shc=0&prev_shf=1&prev_sha=1&prev_shs=0&prev_shr=0&prev_sht=0&o=10&s=2&tm=-1&shf=1&sha=1&ta=-1&sns=-1&sds=-1&nm=%F7%E8%F1%F2%EE%E5+%ED%E5%E1%EE&pn=&submit=%25CF%25EE%25E8%25F1%25EA&f%5B%5D=-1\" // querystring.stringify(data); \n\n    let res = (await axios({\n          method: 'post',\n          url: `${url}?sid=${sid}`,\n          data: dataString,\n          headers: {\n            \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\",\n            \"Accept-Charset\": \"UTF-8\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\": \"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3\",\n            \"Content-type\": \"application/x-www-form-urlencoded\",\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0\",\n            // \"Cookie\": `\n            //     phpbb2mysql_4_data='a:2:{s:11:\"autologinid\";s:0:\"\";s:6:\"userid\";s:8:\"14252200\";}',\n            //     phpbb2mysql_4_sid=\"3f4ac13892c68f1cbae83c86c8ee8f7e\",\n            //     u_cl_watch=\"0\",\n            //     u_count=\"[1,0]\"\n            // `\n          },\n          maxRedirects: 0,\n          responseType: 'arraybuffer',\n          responseEncoding: 'binary'\n        }));\n\n    const htmlBody = iconv.decode(res.data.toString('binary'), 'cp1251');\n\tconst $ = cheerio.load(htmlBody);\n\tconst topics = $('.tablesorter tbody tr');\n    let arr = [];\n\n\n    // console.log(htmlBody);\n    console.log(`Is auth: ${htmlBody.includes('cluber')}`);\n\n    console.log(dataString);\n\n\tfor (var i = 0; i < topics.length; i++) {\n\t\tlet title = topics.eq(i).find('.topictitle').text().trim();\n\t\tlet pageUrl = topics.eq(i).find('.topictitle').attr('href');\n\t\tlet author = topics.eq(i).find('td:nth-child(4)').text().trim();\n\t\tlet size = clearText(topics.eq(i).find('td:nth-child(6)'));\n\t\tlet seed = topics.eq(i).find('td:nth-child(7)').text().trim();\n\t\tlet leech = topics.eq(i).find('td:nth-child(8)').text().trim();\n\n        // console.log('PageURL: ' + pageUrl);\n\n\t\tarr.push({\n\t\t    site: site,\n\t\t\ttitle: title,\n\t\t\tauthor: author,\n\t\t\tsize: size,\n\t\t\tseed: seed,\n\t\t\tleech: leech,\n\t\t\tpageUrl: `${baseUrl}/forum/${pageUrl}`,\n\t\t\ttopicId: (pageUrl || \"\").replace('viewtopic.php?t=', '')\n\t\t});\n\t}\n\n    return arr;\n}\n\n","name":"DummyCode"},{"_id":"6529178a4272c9b1b912ff05","code":"function process(input, done) {\r\n\tdone(null, \"Hello world!\");\r\n}\r\n"},{"_id":"652c51fa952586a883d981c2","code":"// TODO\n/*\n    localhost:3000/site/rutracker/topics/nnmclub?topic=630553\n*/\n\nfunction clearText(element) {\n    return element.contents().filter(function() {\n        return this.type === 'text';\n    }).text().trim();\n    \n}\n\nasync function process(input) {\n    let result = { success: \"ok\" };\n    const siteId = input.params.id;\n    const topicId = input.query.topic;\n        \n    console.log(`siteId: ${siteId}, topicId: ${topicId}`);\n    \n    switch(siteId) {\n      case 'nnmclub':\n        result = await parseNnmclubTopic(topicId);\n        break\n    \n      case 'rutor':\n        result.success = \"TODO\";\n        break\n    \n      case 'kinozal':\n        result.success = \"TODO\";\n        break\n\n      case 'rutracker':\n        result.success = \"TODO\";\n        break\n\n      default:\n        result.success = \"fail\";\n    }\n\n    return { result: result };\n}\n\n\n\nasync function parseNnmclubTopic(topicId) {\n    const baseUrl = 'https://nnmclub.to';\n    const url = `${baseUrl}/forum/viewtopic.php?t=${topicId}`;\n    const sid = \"3f4ac13892c68f1cbae83c86c8ee8f7e\";\n    \n    let res = (await axios({\n      method: 'get',\n      url: `${url}`, // ?sid=${sid}`,\n      headers: {\n        \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\",\n        \"Accept-Charset\": \"UTF-8\",\n        \"Accept-Encoding\": \"gzip, deflate, br\",\n        \"Accept-Language\": \"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3\",\n        \"Content-type\": \"application/x-www-form-urlencoded\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0\",\n        // \"Cookie\": `\n        //     phpbb2mysql_4_data='a:2:{s:11:\"autologinid\";s:0:\"\";s:6:\"userid\";s:8:\"14252200\";}',\n        //     phpbb2mysql_4_sid=\"3f4ac13892c68f1cbae83c86c8ee8f7e\",\n        //     u_cl_watch=\"0\",\n        //     u_count=\"[1,0]\"\n        // `\n      },\n      maxRedirects: 0,\n      responseType: 'arraybuffer',\n      responseEncoding: 'binary'\n    }));\n\n    const htmlBody = iconv.decode(res.data.toString('binary'), 'cp1251');\n\tconst $ = cheerio.load(htmlBody);\n\tlet topicHtml = $('.postbody:first-child').html();\n\t// пост-обработка html\n\ttopicHtml = topicHtml\n\t    .replaceAll('https://nnmstatic.win/forum/image.php?link=', '');\n\tconst title = $('.maintitle').text();\n    const torrentUrl = $('span.genmed:nth-child(1) > b:nth-child(1) > a:nth-child(1)').attr('href');\n    const magnetUrl = $('td.gensmall > a:nth-child(5)').attr('href');\n    const author = clearText($('.forumline > tbody:nth-child(1) > tr:nth-child(2) > td:nth-child(1) > span:nth-child(2) > b:nth-child(1)'))\n    const regDate = clearText($('tr.row1:nth-child(3) > td:nth-child(2)'));\n    \n    // console.log(topicHtml);\n\n    \n    return { \n        success: \"ok\", \n        title: title,\n        author: author,\n        body: topicHtml,\n        torrent: `${baseUrl}/forum/${torrentUrl}`,\n        magnet: magnetUrl,\n        date: regDate\n    };\n}\n\n\n","name":"Fetch topic by ID"},{"_id":"65324bf98885b76805b850af","code":"function clearText(element) {\n    return element.contents().filter(function() {\n        return this.type === 'text';\n    }).text().trim();\n    \n}\n\nasync function phoneInfo(phoneSrc) {\n    try {\n        if (typeof phoneSrc !== 'string' && !(phoneSrc instanceof String)) {\n            return {\n                region: 'Unknown'\n            }\n        }\n        const phone = phoneSrc.replaceAll(' ', '+').trim();\n        const params = `__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUKLTkzNzc4MTQ5N2QYAQUvY3RsMDAkY3RsMDAkY3BoTWFpbiRjcGhTZXJ2aWNlTWFpbiRtdkFkU2VsZWN0b3IPD2QCAWSArUxVg%2F4mZQJEuv%2B9St0OhSFktg%3D%3D&__VIEWSTATEGENERATOR=DCAE8BF3&ctl00%24ctl00%24ShowAdRDFS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDFS%24hfTechInfo=&ctl00%24ctl00%24hfPagesVisits=5&ctl00%24ctl00%24ShowAd1Desktop%24hfCountry=RU&ctl00%24ctl00%24ShowAd1Desktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumDesktop=${phone}&ctl00%24ctl00%24cphMain%24cphServiceMain%24btnSearchDesktop=%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumMobile=&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfCountry=RU&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputName=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputEmail=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputMessage=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24hfItemName=MobilePhoneInfo.aspx&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfLoadItems=20&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfCacheUGC=22.10.2023+18%3A40%3A52&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24ratingValue=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview5stars=&ctl00%24ctl00%24ShowAd3%24hfCountry=RU&ctl00%24ctl00%24ShowAd3%24hfTechInfo=&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfCountry=RU&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfTechInfo=&ctl00%24ctl00%24ShowAdRDBS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDBS%24hfTechInfo=&ctl00%24ctl00%24hfCachedTime=22.10.2023+18%3A42%3A36`;\n        console.log(params);\n    \n        // Cookie\n        // \tASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697989242.1.1.1697989407.3.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009068600200; _gat=1\n        \n        const res = (await axios({\n              method: 'post',\n              url: 'https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx',\n              data: params,\n              headers: {\n                \"Accept\" : \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\",\n                \"Accept-Encoding\" : \"gzip, deflate, br\",\n                \"Accept-Language\": \"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3\",\n                \"Cache-Control\": \"no-cache\",\n                \"Connection\": \"keep-alive\",\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                \"Host\": \"www.spravportal.ru\",\n                \"Origin\": \"https://www.spravportal.ru\",\n                \"Pragma\": \"no-cache\",\n                \"Referer\": \"https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx\",\n                \"Sec-Fetch-Dest\": \"document\",\n                \"Sec-Fetch-Mode\": \"navigate\",\n                \"Sec-Fetch-Site\": \"same-origin\",\n                \"Sec-Fetch-User\": \"?1\",\n                \"Upgrade-Insecure-Requests\": \"1\",\n            \t\"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0\",\n                \"Cookie\": \"ASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697992067.2.1.1697992145.60.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009076473750; cf_chl_2=b91fee0da59bdaf; cf_clearance=qxsbf1HgDl.EkIXEdrzxvhCGeVEqTbe8qlpGlUyrRLU-1697992060-0-1-f03b3c7d.5fc09290.a73a639d-160.0.0; _gat=1\" // \"ASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697989242.1.1.1697989407.3.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009068600200; _gat=1\"\n              }\n            })).data;\n        \n        console.log(res.includes(\"область\"));\n        \n    \tconst $ = cheerio.load(res);\n        const region = $('.form-horizontal > div:nth-child(1) > div:nth-child(2) > strong:nth-child(1)');\n        console.log(region);\n        \n        return {\n            region: region.text()\n        };\n    } catch (err) {\n        return {\n            region: \"Error\"\n        }\n    }\n}\n\nasync function process(input) {\n\t// const res = (await axios.post('https://sex7.sexorzn.xyz/core/api.php?load')).data;\n\n// const params = `__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUKLTkzNzc4MTQ5N2QYAQUvY3RsMDAkY3RsMDAkY3BoTWFpbiRjcGhTZXJ2aWNlTWFpbiRtdkFkU2VsZWN0b3IPD2QCAWSArUxVg%2F4mZQJEuv%2B9St0OhSFktg%3D%3D&__VIEWSTATEGENERATOR=DCAE8BF3&ctl00%24ctl00%24ShowAdRDFS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDFS%24hfTechInfo=&ctl00%24ctl00%24hfPagesVisits=5&ctl00%24ctl00%24ShowAd1Desktop%24hfCountry=RU&ctl00%24ctl00%24ShowAd1Desktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain&ctl00%24ctl00%24cphMain%24cphServiceMain%24btnSearchDesktop=%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumMobile=&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfCountry=RU&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputName=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputEmail=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputMessage=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24hfItemName=MobilePhoneInfo.aspx&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfLoadItems=20&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfCacheUGC=22.10.2023+18%3A40%3A52&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24ratingValue=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview5stars=&ctl00%24ctl00%24ShowAd3%24hfCountry=RU&ctl00%24ctl00%24ShowAd3%24hfTechInfo=&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfCountry=RU&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfTechInfo=&ctl00%24ctl00%24ShowAdRDBS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDBS%24hfTechInfo=&ctl00%24ctl00%24hfCachedTime=22.10.2023+18%3A42%3A36`;\n\n// const spravPortal = (await axios({\n//         method: 'get',\n//         url: 'https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx',\n//         data: params\n//     }));\n    \n    // console.log(\"==============================\");\n    // console.log(spravPortal.headers);\n    // console.log(\"==============================\");\n    \n    const res = (await axios({\n          method: 'post',\n          url: 'https://sexyrzn.com/core/api.php?load',\n          data: {\n            num: `${input.query.count || 0}`,\n            path: '/now/'\n          },\n          headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n          }\n        })).data;\n\n    // console.log(res);\n\t\n\tconst $ = cheerio.load(res);\n\tlet items = $('.girl_info')\n\tconst arr = [];\n\n\tconsole.log(`len: ${items.length}`);\n\n    // const testRegion = await phoneInfo('8 920 950-09-78')\n    // console.log(await phoneInfo('8 920 950-09-78'));\n\n\tfor (var i = 0; i < items.length; i++) {\n\t\tlet slutName = items.find('.girl_name a').eq(i);\n\t\tlet slutPhone = items.find('.girl_phone').eq(i);\n        const slutInfo = items.find('.girl-intro p').eq(i);\n        const desc = items.find('.girl-desc').eq(i);\n        \n\t\tarr.push({\n\t\t\tname: clearText(slutName),\n\t\t\tphone: clearText(slutPhone),\n\t\t\tinfo: clearText(slutInfo),\n\t\t\tdescription: desc.text().trim().split('\\n').map(str => str.trim()),\n// \t\t\tphoneRegion: await phoneInfo(clearText(slutPhone))\n\t\t});\n\t}\n\n\treturn { count: items.length, sluts: arr };\n}","name":"Fetch list of sluts"},{"_id":"6532bba99439ebe9462ff62f","code":"var DMap = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13, 14: 14, 15: 15, 16: 16, 17: 17, 18: 18, 19: 19, 20: 20, 21: 21, 22: 22, 23: 23, 24: 24, 25: 25, 26: 26, 27: 27, 28: 28, 29: 29, 30: 30, 31: 31, 32: 32, 33: 33, 34: 34, 35: 35, 36: 36, 37: 37, 38: 38, 39: 39, 40: 40, 41: 41, 42: 42, 43: 43, 44: 44, 45: 45, 46: 46, 47: 47, 48: 48, 49: 49, 50: 50, 51: 51, 52: 52, 53: 53, 54: 54, 55: 55, 56: 56, 57: 57, 58: 58, 59: 59, 60: 60, 61: 61, 62: 62, 63: 63, 64: 64, 65: 65, 66: 66, 67: 67, 68: 68, 69: 69, 70: 70, 71: 71, 72: 72, 73: 73, 74: 74, 75: 75, 76: 76, 77: 77, 78: 78, 79: 79, 80: 80, 81: 81, 82: 82, 83: 83, 84: 84, 85: 85, 86: 86, 87: 87, 88: 88, 89: 89, 90: 90, 91: 91, 92: 92, 93: 93, 94: 94, 95: 95, 96: 96, 97: 97, 98: 98, 99: 99, 100: 100, 101: 101, 102: 102, 103: 103, 104: 104, 105: 105, 106: 106, 107: 107, 108: 108, 109: 109, 110: 110, 111: 111, 112: 112, 113: 113, 114: 114, 115: 115, 116: 116, 117: 117, 118: 118, 119: 119, 120: 120, 121: 121, 122: 122, 123: 123, 124: 124, 125: 125, 126: 126, 127: 127, 1027: 129, 8225: 135, 1046: 198, 8222: 132, 1047: 199, 1168: 165, 1048: 200, 1113: 154, 1049: 201, 1045: 197, 1050: 202, 1028: 170, 160: 160, 1040: 192, 1051: 203, 164: 164, 166: 166, 167: 167, 169: 169, 171: 171, 172: 172, 173: 173, 174: 174, 1053: 205, 176: 176, 177: 177, 1114: 156, 181: 181, 182: 182, 183: 183, 8221: 148, 187: 187, 1029: 189, 1056: 208, 1057: 209, 1058: 210, 8364: 136, 1112: 188, 1115: 158, 1059: 211, 1060: 212, 1030: 178, 1061: 213, 1062: 214, 1063: 215, 1116: 157, 1064: 216, 1065: 217, 1031: 175, 1066: 218, 1067: 219, 1068: 220, 1069: 221, 1070: 222, 1032: 163, 8226: 149, 1071: 223, 1072: 224, 8482: 153, 1073: 225, 8240: 137, 1118: 162, 1074: 226, 1110: 179, 8230: 133, 1075: 227, 1033: 138, 1076: 228, 1077: 229, 8211: 150, 1078: 230, 1119: 159, 1079: 231, 1042: 194, 1080: 232, 1034: 140, 1025: 168, 1081: 233, 1082: 234, 8212: 151, 1083: 235, 1169: 180, 1084: 236, 1052: 204, 1085: 237, 1035: 142, 1086: 238, 1087: 239, 1088: 240, 1089: 241, 1090: 242, 1036: 141, 1041: 193, 1091: 243, 1092: 244, 8224: 134, 1093: 245, 8470: 185, 1094: 246, 1054: 206, 1095: 247, 1096: 248, 8249: 139, 1097: 249, 1098: 250, 1044: 196, 1099: 251, 1111: 191, 1055: 207, 1100: 252, 1038: 161, 8220: 147, 1101: 253, 8250: 155, 1102: 254, 8216: 145, 1103: 255, 1043: 195, 1105: 184, 1039: 143, 1026: 128, 1106: 144, 8218: 130, 1107: 131, 8217: 146, 1108: 186, 1109: 190}\n\nfunction unicodeToWin1251_UrlEncoded(s) {\n    var L = []\n    for (var i=0; i<s.length; i++) {\n        var ord = s.charCodeAt(i)\n        if (!(ord in DMap))\n            throw \"Character \"+s.charAt(i)+\" isn't supported by win1251!\";\n        L.push('%'+DMap[ord].toString(16));\n    }\n    return L.join('').toUpperCase();\n}\n\nasync function process(input) {\n    const passSsid = input.query.ssid;\n    const passCap = input.query.cap;\n    const passCapcha = input.query.capcha;\n\n    const data = {\n            \"redirect\" : \"https://rutracker.org/forum/index.php\",\n            \"login_username\": \"torba4me\",\n            \"login_password\": \"celebixi56\",\n          };\n    if (passSsid) {\n        data.cap_sid = passSsid;\n    }\n    if (passCap && passCapcha) {\n        data[passCap] = passCapcha;\n    }\n    data.login = \"%C2%F5%EE%E4\";\n\n\n    let res = {};\n    \n    try {\n        res = (await axios({\n              method: 'post',\n              url: 'https://rutracker.org/forum/login.php',\n              data: data,\n              headers: {\n                \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n                // \"Accept-Charset\": \"UTF-8\",\n                \"Accept-Encoding\": \"gzip, deflate, sdch\",\n                \"Accept-Language\": \"ru,ru-RU,en-US;q=0.8,en;q=0.6\",\n                \"Content-type\": \"application/x-www-form-urlencoded\",\n                \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36\"\n              },\n              maxRedirects: 0\n            }));\n            \n    \n    \tconst $ = cheerio.load(res.data);\n    \tconst capcha = $(\".borderless > tbody:nth-child(1) > tr:nth-child(3)\")\n    \n        const isCapchaExists = res.data.includes('https://static.rutracker.cc/captcha');\n        const capchaSrc = capcha.find('img').attr('src');\n        const ssid = capcha.find('input[name=\"cap_sid\"]').attr('value');\n        const capCode = capcha.find('.reg-input').attr('name');\n\n        console.log(res.headers);\n        console.log(res.status);\n        \n    \treturn { result: { \n    \t    foundCapcha: isCapchaExists, \n    \t    capcha: capchaSrc, \n    \t    ssid: ssid,\n    \t    capCode: capCode\n    \t} };\n    } \n    catch (err) {\n        console.log(err.response.headers);\n        console.log(err.response.status);\n        \n        return { error: \"Unknown\" };\n    }\n}","name":"Login action"},{"_id":"653526f12cf6efb3620514bc","code":"async function process(input) {\n    const searchQuery = input.query.text;\n    console.log(`searchQuery: ${searchQuery}`);\n    let arr = [];\n    \n    let res = (await axios({\n          method: 'post',\n          url: `https://rutracker.org/forum/tracker.php?nm=${searchQuery}`,\n          // data: data,\n          headers: {\n            \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n            \"Accept-Charset\": \"UTF-8\",\n            \"Accept-Encoding\": \"gzip, deflate, sdch\",\n            \"Accept-Language\": \"ru,ru-RU,en-US;q=0.8,en;q=0.6\",\n            \"Content-type\": \"application/x-www-form-urlencoded\",\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36\",\n            \"Cookie\": \"bb_session=0-45092218-RfQ7MToUqO3gDsiy7HgG; expires=Wed, 19-Oct-2033 06:34:36 GMT; Max-Age=315360000; path=/forum/; domain=.rutracker.org; secure; HttpOnly\"\n          },\n          maxRedirects: 0\n        }));\n\n\tconst $ = cheerio.load(res.data);\n\n \tconst topics = $(\"#main_content_wrap tr.hl-tr\");\n \t\n \t// console.log(res.data);\n    \n\tconsole.log(`len: ${topics.length}`);\n\n\tfor (var i = 0; i < topics.length; i++) {\n\t\tlet title = topics.eq(i).text().trim();\n\t\t\n\t\tconsole.log(title);\n\n\t\tarr.push({\n\t\t\ttitle: title,\n\t\t});\n\t}\n\n//     const capchaSrc = capcha.find('img').attr('src');\n//     const ssid = capcha.find('input[name=\"cap_sid\"]').attr('value');\n//     const capCode = capcha.find('.reg-input').attr('name');\n\n//     console.log(res.headers);\n//     console.log(res.status);\n    \n\treturn { result: \"Ok\", arr: arr };\n}"},{"_id":"65aa9df8b53b1a9bc951019b","code":"async function process(input) {\n    \n    return {\n        result: \"ALL OK\"\n    }\n}"},{"_id":"65afb1e4e86fdca253cd45ee","code":"// TODO"},{"_id":"65afb344c3e162321dbe889e","code":"// TODO"},{"_id":"65ba21ab92f0bd181e42eeef","code":"function clearText(element) {\n    return element.contents().filter(function() {\n        return this.type === 'text';\n    }).text().trim();\n    \n}\n\nasync function phoneInfo(phoneSrc) {\n    try {\n        if (typeof phoneSrc !== 'string' && !(phoneSrc instanceof String)) {\n            return {\n                region: 'Unknown'\n            }\n        }\n        const phone = phoneSrc.replaceAll(' ', '+').trim();\n        const params = `__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUKLTkzNzc4MTQ5N2QYAQUvY3RsMDAkY3RsMDAkY3BoTWFpbiRjcGhTZXJ2aWNlTWFpbiRtdkFkU2VsZWN0b3IPD2QCAWSArUxVg%2F4mZQJEuv%2B9St0OhSFktg%3D%3D&__VIEWSTATEGENERATOR=DCAE8BF3&ctl00%24ctl00%24ShowAdRDFS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDFS%24hfTechInfo=&ctl00%24ctl00%24hfPagesVisits=5&ctl00%24ctl00%24ShowAd1Desktop%24hfCountry=RU&ctl00%24ctl00%24ShowAd1Desktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumDesktop=${phone}&ctl00%24ctl00%24cphMain%24cphServiceMain%24btnSearchDesktop=%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumMobile=&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfCountry=RU&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputName=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputEmail=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputMessage=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24hfItemName=MobilePhoneInfo.aspx&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfLoadItems=20&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfCacheUGC=22.10.2023+18%3A40%3A52&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24ratingValue=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview5stars=&ctl00%24ctl00%24ShowAd3%24hfCountry=RU&ctl00%24ctl00%24ShowAd3%24hfTechInfo=&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfCountry=RU&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfTechInfo=&ctl00%24ctl00%24ShowAdRDBS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDBS%24hfTechInfo=&ctl00%24ctl00%24hfCachedTime=22.10.2023+18%3A42%3A36`;\n        console.log(params);\n    \n        // Cookie\n        // \tASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697989242.1.1.1697989407.3.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009068600200; _gat=1\n        \n        const res = (await axios({\n              method: 'post',\n              url: 'https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx',\n              data: params,\n              headers: {\n                \"Accept\" : \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\",\n                \"Accept-Encoding\" : \"gzip, deflate, br\",\n                \"Accept-Language\": \"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3\",\n                \"Cache-Control\": \"no-cache\",\n                \"Connection\": \"keep-alive\",\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                \"Host\": \"www.spravportal.ru\",\n                \"Origin\": \"https://www.spravportal.ru\",\n                \"Pragma\": \"no-cache\",\n                \"Referer\": \"https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx\",\n                \"Sec-Fetch-Dest\": \"document\",\n                \"Sec-Fetch-Mode\": \"navigate\",\n                \"Sec-Fetch-Site\": \"same-origin\",\n                \"Sec-Fetch-User\": \"?1\",\n                \"Upgrade-Insecure-Requests\": \"1\",\n            \t\"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0\",\n                \"Cookie\": \"ASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697992067.2.1.1697992145.60.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009076473750; cf_chl_2=b91fee0da59bdaf; cf_clearance=qxsbf1HgDl.EkIXEdrzxvhCGeVEqTbe8qlpGlUyrRLU-1697992060-0-1-f03b3c7d.5fc09290.a73a639d-160.0.0; _gat=1\" // \"ASP.NET_SessionId=flm03oziqnzwegnrydhfzkvm; _ga_XMQ2MEH9Z9=GS1.1.1697989242.1.1.1697989407.3.0.0; _ga=GA1.2.1934055118.1697989242; _gid=GA1.2.1118076847.1697989245; sp_adnewuser=1; defa=5009068600200; _gat=1\"\n              }\n            })).data;\n        \n        console.log(res.includes(\"область\"));\n        \n    \tconst $ = cheerio.load(res);\n        const region = $('.form-horizontal > div:nth-child(1) > div:nth-child(2) > strong:nth-child(1)');\n        console.log(region);\n        \n        return {\n            region: region.text()\n        };\n    } catch (err) {\n        return {\n            region: \"Error\"\n        }\n    }\n}\n\nasync function process(input) {\n\t// const res = (await axios.post('https://sex7.sexorzn.xyz/core/api.php?load')).data;\n\n// const params = `__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUKLTkzNzc4MTQ5N2QYAQUvY3RsMDAkY3RsMDAkY3BoTWFpbiRjcGhTZXJ2aWNlTWFpbiRtdkFkU2VsZWN0b3IPD2QCAWSArUxVg%2F4mZQJEuv%2B9St0OhSFktg%3D%3D&__VIEWSTATEGENERATOR=DCAE8BF3&ctl00%24ctl00%24ShowAdRDFS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDFS%24hfTechInfo=&ctl00%24ctl00%24hfPagesVisits=5&ctl00%24ctl00%24ShowAd1Desktop%24hfCountry=RU&ctl00%24ctl00%24ShowAd1Desktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain&ctl00%24ctl00%24cphMain%24cphServiceMain%24btnSearchDesktop=%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C&ctl00%24ctl00%24cphMain%24cphServiceMain%24textNumMobile=&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfCountry=RU&ctl00%24ctl00%24cphMain%24cphServiceMain%24ShowAdResultBlockDesktop%24hfTechInfo=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputName=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputEmail=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24inputMessage=&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCNewComment%24hfItemName=MobilePhoneInfo.aspx&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfLoadItems=20&ctl00%24ctl00%24cphMain%24cphServiceMain%24UGCComments%24hfCacheUGC=22.10.2023+18%3A40%3A52&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24ratingValue=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview=&ctl00%24ctl00%24cphMain%24cphServiceTools%24Rating%24txtReview5stars=&ctl00%24ctl00%24ShowAd3%24hfCountry=RU&ctl00%24ctl00%24ShowAd3%24hfTechInfo=&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfCountry=RU&ctl00%24ctl00%24ShowBlockUnderRightColAd%24hfTechInfo=&ctl00%24ctl00%24ShowAdRDBS%24hfCountry=RU&ctl00%24ctl00%24ShowAdRDBS%24hfTechInfo=&ctl00%24ctl00%24hfCachedTime=22.10.2023+18%3A42%3A36`;\n\n// const spravPortal = (await axios({\n//         method: 'get',\n//         url: 'https://www.spravportal.ru/Services/PhoneCodes/MobilePhoneInfo.aspx',\n//         data: params\n//     }));\n    \n    // console.log(\"==============================\");\n    // console.log(spravPortal.headers);\n    // console.log(\"==============================\");\n    \n    const res = (await axios({\n          method: 'post',\n          url: 'https://sexyrzn.com/core/api.php?load',\n          data: {\n            num: `${input.query.count || 0}`,\n            path: '/'\n          },\n          headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n          }\n        })).data;\n\n    // console.log(res);\n\t\n\tconst $ = cheerio.load(res);\n\tlet items = $('.girl_info')\n\tconst arr = [];\n\n\tconsole.log(`len: ${items.length}`);\n\n    // const testRegion = await phoneInfo('8 920 950-09-78')\n    // console.log(await phoneInfo('8 920 950-09-78'));\n\n\tfor (var i = 0; i < items.length; i++) {\n\t\tlet slutName = items.find('.girl_name a').eq(i);\n\t\tlet slutPhone = items.find('.girl_phone').eq(i);\n        const slutInfo = items.find('.girl-intro p').eq(i);\n        const desc = items.find('.girl-desc').eq(i);\n        \n        const pageLink = slutName.attr('href');\n        const uslugi = items.find('.yamogu span:not(.strike)');\n        \n        console.log('len uslugi: ' + uslugi.length);\n        // for (var i = 0; i < uslugi.length; i++) {\n        //     const usluga = sluga.eq(i);\n        //     console.log(usluga.text());\n        // }\n        \n        \n\t\tarr.push({\n\t\t    page: `https://sexyrzn.com${pageLink}`,\n\t\t\tname: clearText(slutName),\n\t\t\tphone: clearText(slutPhone),\n\t\t\tinfo: clearText(slutInfo),\n\t\t\tdescription: desc.text().trim().split('\\n').map(str => str.trim()),\n// \t\t\tphoneRegion: await phoneInfo(clearText(slutPhone))\n\t\t});\n\t}\n\n\treturn { count: items.length, sluts: arr };\n}"},{"_id":"65bcca3ce9a6e062e474a8d0","code":"function process() {\n    throw new Error(\"sdgfdgf\");\n}"}]}